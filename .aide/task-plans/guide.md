# 任务计划总导览

## 任务简述

将《御剑无双》重构为《无尽幸存者》(Endless Survivor)，修复现有 Bug，并实现多样化普攻系统。

## 用户决策摘要

| 决策项 | 结果 |
|--------|------|
| 游戏名称 | 无尽幸存者 (Endless Survivor) |
| 初始攻击 | 开局选择初始普攻类型 |
| 多普攻机制 | 按攻击键同时触发所有普攻 |
| 普攻类型 | 6种：射箭、挥砍、法球、冲击波、闪电链、召唤物 |
| 视觉调整 | 改文案 + 调整部分视觉元素 |

## 子计划列表

| # | 名称 | 状态 | 细则文档 |
|---|------|------|----------|
| 1 | Bug 修复 + 测试关卡 | **completed** | spec-01.md |
| 2 | 品牌重塑 + 技能系统 | **completed** | spec-02.md |
| 3 | 普攻系统基础架构 | **completed** | spec-03.md |
| 4 | 普攻类型扩展 + 强化系统 | pending | spec-04.md |

### 子计划 1 当前进度

- [x] Bug 1：死亡后相机/UI飘移 - **已完成**
- [x] Bug 2：经验值系统和升级队列 - **已完成**
  - [x] RoguelikeSystem 添加经验值属性和方法
  - [x] GameScene 敌人击杀给予经验值
  - [x] HUDScene 经验值条显示
  - [x] BuffSelectionScene 队列支持
- [x] 创建测试关卡 TestScene.js - **已完成**
- [x] 添加测试模式主菜单入口 - **已完成**

### 子计划 2 当前进度

- [x] 更新游戏名称（index.html, main.js, MainMenuScene.js, package.json）
- [x] 更新敌人名称（config.js）
- [x] 更新 UI 文案（结算界面等）
- [x] 更新技能系统为 4 个通用技能（config.js）
- [x] 创建技能 SVG 图标（src/assets/skills/）
- [x] 重构 SkillManager.js
- [x] 更新 BuffData.js 技能相关强化
- [x] 更新 HUDScene.js 技能栏配置

### 子计划 3 当前进度

- [x] 创建 ATTACK_TYPES 配置（config.js）
- [x] 创建 AttackBase.js 普攻基类
- [x] 创建 AttackManager.js 普攻管理器
- [x] 创建 ArrowAttack.js 射箭普攻
- [x] 创建 SlashAttack.js 挥砍普攻
- [x] 创建 AttackSelectScene.js 开局选择界面
- [x] 修改 GameScene.js 集成 AttackManager
- [x] 修改 main.js 注册新场景

## 执行顺序

```
子计划 1 ─────────────────────────────────────────→
                                                   ↘
子计划 2 ─────────────────────────────────────────→ 子计划 3 → 子计划 4
```

- **子计划 1** 和 **子计划 2** 可并行执行（无依赖）
- **子计划 3** 依赖子计划 2（需要品牌重塑完成后才能设计新普攻系统）
- **子计划 4** 依赖子计划 3（需要普攻基础架构完成）

## 预期产出

### 功能产出
- 修复 2 个 Bug（死亡相机飘移、升级选择覆盖）
- 新增测试关卡（数字键快捷功能）
- 游戏品牌更新（名称、文案、部分视觉）
- 4 个通用技能 + SVG 图标
- 6 种普攻类型 + 专属强化树
- 开局普攻选择界面

### 文件变更预估
- 新增文件：约 8-10 个
- 修改文件：约 15-20 个
- 代码行数变更：约 +2000 ~ +3000 行

## 风险与注意事项

1. **性能风险**：多普攻同时触发可能影响性能，需要优化
2. **平衡风险**：6 种普攻 + 多种强化组合，平衡性需要测试
3. **兼容风险**：大规模重构可能引入回归 Bug，依赖测试关卡验证

## 备注

- 子计划 1 的测试关卡将作为后续开发的验证工具
- 每个子计划完成后需用户确认才能继续下一个
