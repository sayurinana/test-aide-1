# 子计划 1：Bug 修复 + 测试关卡

## 目标

修复现有 Bug 并创建测试关卡，为后续开发提供验证工具。

## 具体步骤

### Bug 1：死亡后相机/UI 飘移

1. 定位问题：分析 `GameScene.js` 中玩家死亡后的相机和 UI 处理逻辑
2. 修复相机：死亡时停止相机跟随，固定在玩家最后位置
3. 修复 UI：确保结算界面按钮在屏幕可见区域内
4. 验证：测试死亡流程，确认按钮可点击

### Bug 2：连续升级强化选择被覆盖

1. 定位问题：分析 `RoguelikeSystem.js` 和 `BuffSelectionScene.js` 的升级触发逻辑
2. 实现队列机制：创建升级队列，按顺序处理每次升级
3. 修改触发逻辑：只有当前升级选择完成后才处理下一个
4. 验证：快速获取大量经验，确认每次升级都能选择

### 测试关卡

1. 创建 `TestScene.js` 测试场景
2. 实现数字键功能：
   - `1`：获得大量经验（不直接升级，触发自然升级流程）
   - `2`：直接死亡（测试死亡流程）
   - `3`：生成一波敌人
   - `4`：清除所有敌人
   - `5`：切换无敌模式
   - `0`：返回主菜单
3. 在主菜单添加「测试模式」入口（可选：按住 Shift 点击开始显示）

## 验证标准

- [ ] 角色死亡后，结算界面按钮在屏幕中央可见区域
- [ ] 连续升级时（如一次获得足够升 3 级的经验），能依次选择 3 次强化
- [ ] 测试关卡数字键功能全部正常
- [ ] 测试关卡可从主菜单进入

## 依赖

- **前置**：无
- **后续**：子计划 3、4 将使用测试关卡进行验证
