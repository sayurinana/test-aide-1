@startuml spec-04-task-flow
!theme plain
title 子计划4：完善打磨 - 任务执行流程

start

partition "4.1 视觉效果完善" {
  :完善角色视觉设计;
  note right: 剑光拖尾、攻击特效
  :完善敌人视觉设计;
  note right: 死亡粒子、受击闪烁
  :添加背景装饰;
  :添加屏幕震动和Hit Stop;
}

partition "4.2 音效系统" {
  :集成 Howler.js 音频库;
  :添加背景音乐;
  :添加攻击/技能音效;
  :添加敌人受击/死亡音效;
  :添加UI交互音效;
  :实现音量控制;
}

partition "4.3 UI完善" {
  :实现开始界面;
  note right: 游戏标题、开始按钮
  :完善战斗HUD;
  note right: 波次进度、Boss血条
  :完善技能选择界面;
  :实现暂停菜单;
  :完善结算界面;
  :添加UI动画效果;
}

partition "4.4 游戏体验优化" {
  :调整操作手感;
  :优化攻击反馈;
  :调整敌人密度和节奏;
  :平衡数值系统;
}

partition "4.5 性能优化" {
  :优化渲染性能;
  note right: 批量渲染、减少draw call
  :完善对象池;
  :优化碰撞检测;
  note right: 空间分区
  :减少内存占用;
}

partition "4.6 测试和修复" {
  :功能测试;
  :性能测试;
  note right: 目标: 200+敌人@60FPS
  :修复发现的Bug;
  :边界情况处理;
}

partition "4.7 发布准备" {
  :添加游戏教程;
  :优化首次加载;
  :生成生产构建;
  :准备发布页面;
}

stop

@enduml
